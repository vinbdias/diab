{"version":3,"sources":["../../app-es6/models/Quiz.js"],"names":["Quiz","_respostas","_perguntas","respostas","pontuacao","_calcularPontuacao","resultadoQuiz","perfil","_perfis","find","indice","valores","forEach","idResposta","push","opcoes","opcao","id","valor","reduce","acumulador","perguntas","_embaralharOpcoes","PerguntasDataSource","getPerguntas","opcoesRotulos","pergunta","indicePergunta","ArrayHelper","shuffle","indiceOpcao","rotulo","PerfisDataSource","getPerfis","Array","isArray","concat","perfis"],"mappings":";;;;;;IAAMA,I;AAEF,oBAAc;AAAA;;AAEV,aAAKC,UAAL,GAAkB,EAAlB;AACA,aAAKC,UAAL,GAAkB,EAAlB;AACH;;;;8CAmCqBC,S,EAAW;;AAE7B,iBAAKF,UAAL,GAAkBE,SAAlB;;AAEA,gBAAIC,YAAY,KAAKC,kBAAL,EAAhB;;AAEA,gBAAIC,gBAAgB;;AAEhBF;AAFgB,aAApB;;AAMA,gBAAGA,aAAa,EAAhB,EAAoB;;AAEhBE,8BAAcC,MAAd,GAAuB,KAAKC,OAAL,CAAaC,IAAb,CAAkB,kBAAU;;AAE/C,2BAAOF,OAAOG,MAAP,IAAiB,EAAxB;AACH,iBAHsB,CAAvB;AAIH;;AAGD,gBAAGN,aAAa,EAAb,IAAmBA,YAAY,EAAlC,EAAsC;;AAElCE,8BAAcC,MAAd,GAAuB,KAAKC,OAAL,CAAaC,IAAb,CAAkB,kBAAU;;AAE/C,2BAAOF,OAAOG,MAAP,IAAiB,EAAxB;AACH,iBAHsB,CAAvB;AAIH;;AAED,gBAAGN,YAAY,EAAf,EAAmB;;AAEfE,8BAAcC,MAAd,GAAuB,KAAKC,OAAL,CAAaC,IAAb,CAAkB,kBAAU;;AAE/C,2BAAOF,OAAOG,MAAP,IAAiB,EAAxB;AACH,iBAHsB,CAAvB;AAIH;;AAED,mBAAOJ,aAAP;AACH;;;6CAEoB;AAAA;;AAEjB,gBAAIK,UAAU,EAAd;;AAEA,iBAAKV,UAAL,CAAgBW,OAAhB,CAAwB,UAACC,UAAD,EAAaH,MAAb,EAAwB;;AAE5CC,wBAAQG,IAAR,CAAa,MAAKZ,UAAL,CAAgBQ,MAAhB,EAAwBK,MAAxB,CAA+BN,IAA/B,CAAoC,iBAAS;;AAEtD,2BAAOO,MAAMC,EAAN,IAAYJ,UAAnB;AACH,iBAHY,EAGVK,KAHH;AAIH,aAND;;AAQA,mBAAOP,QAAQQ,MAAR,CAAe,UAACC,UAAD,EAAaF,KAAb;AAAA,uBAAuBE,aAAaF,KAApC;AAAA,aAAf,CAAP;AACH;;;uCAEc;;AAEX,gBAAIG,YAAY,KAAKC,iBAAL,CAAuBC,oBAAoBC,YAApB,EAAvB,CAAhB;;AAEA,mBAAOH,SAAP;AACH;;;0CAEiBA,S,EAAW;;AAEzB,gBAAMI,gBAAgB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,CAAtB;;AAEAJ,sBAAUT,OAAV,CAAkB,UAACc,QAAD,EAAWC,cAAX;AAAA,uBACNC,YAAYC,OAAZ,CAAoBH,SAASX,MAA7B,EAAqCH,OAArC,CAA6C,UAACI,KAAD,EAAQc,WAAR;AAAA,2BACLd,MAAMe,MAAN,GAAeN,cAAcK,WAAd,CADV;AAAA,iBAA7C,CADM;AAAA,aAAlB;;AAIA,mBAAOT,SAAP;AACH;;;oCAEW;;AAER,mBAAOW,iBAAiBC,SAAjB,EAAP;AACH;;;0BA7GaZ,S,EAAW;;AAErB,gBAAGa,MAAMC,OAAN,CAAcd,SAAd,CAAH,EACI,KAAKnB,UAAL,GAAkB,GAAGkC,MAAH,CAAUf,SAAV,CAAlB,CADJ,KAGI,KAAKnB,UAAL,GAAkBmB,SAAlB;AACP,S;4BAEe;;AAEZ,mBAAO,KAAKnB,UAAZ;AACH;;;0BAEUmC,M,EAAQ;;AAEf,iBAAK7B,OAAL,GAAe,GAAG4B,MAAH,CAAUC,MAAV,CAAf;AACH,S;4BAEY;;AAET,mBAAO,KAAK7B,OAAZ;AACH;;;0BAEaL,S,EAAW;;AAErB,iBAAKF,UAAL,GAAkB,GAAGmC,MAAH,CAAUjC,SAAV,CAAlB;AACH,S;4BAEe;;AAEZ,mBAAO,KAAKF,UAAZ;AACH","file":"Quiz.js","sourcesContent":["class Quiz {\r\n\r\n    constructor() {\r\n\r\n        this._respostas = [];\r\n        this._perguntas = [];\r\n    }\r\n\r\n    set perguntas(perguntas) {\r\n\r\n        if(Array.isArray(perguntas))\r\n            this._perguntas = [].concat(perguntas);\r\n        else  \r\n            this._perguntas = perguntas;\r\n    }\r\n\r\n    get perguntas() {\r\n\r\n        return this._perguntas;\r\n    }\r\n\r\n    set perfis(perfis) {\r\n\r\n        this._perfis = [].concat(perfis);\r\n    }\r\n\r\n    get perfis() {\r\n\r\n        return this._perfis;\r\n    }\r\n\r\n    set respostas(respostas) {\r\n\r\n        this._respostas = [].concat(respostas);\r\n    }\r\n    \r\n    get respostas() {\r\n\r\n        return this._respostas;\r\n    }    \r\n\r\n    calcularResultadoQuiz(respostas) {\r\n                    \r\n        this._respostas = respostas;\r\n\r\n        let pontuacao = this._calcularPontuacao();\r\n\r\n        let resultadoQuiz = {\r\n\r\n            pontuacao\r\n        };\r\n        \r\n\r\n        if(pontuacao >= 90) {\r\n\r\n            resultadoQuiz.perfil = this._perfis.find(perfil => {\r\n\r\n                return perfil.indice == 90;\r\n            });  \r\n        }\r\n\r\n            \r\n        if(pontuacao >= 60 && pontuacao < 90) {\r\n\r\n            resultadoQuiz.perfil = this._perfis.find(perfil => {\r\n\r\n                return perfil.indice == 60;\r\n            });        \r\n        }\r\n\r\n        if(pontuacao < 60) {\r\n\r\n            resultadoQuiz.perfil = this._perfis.find(perfil => {\r\n\r\n                return perfil.indice == 30;\r\n            }); \r\n        }\r\n\r\n        return resultadoQuiz;            \r\n    }\r\n\r\n    _calcularPontuacao() {\r\n\r\n        let valores = [];        \r\n\r\n        this._respostas.forEach((idResposta, indice) => {\r\n            \r\n            valores.push(this._perguntas[indice].opcoes.find(opcao => {\r\n                \r\n                return opcao.id == idResposta;\r\n            }).valor);                 \r\n        });\r\n\r\n        return valores.reduce((acumulador, valor) => acumulador + valor);\r\n    }\r\n\r\n    getPerguntas() {\r\n\r\n        let perguntas = this._embaralharOpcoes(PerguntasDataSource.getPerguntas());\r\n        \r\n        return perguntas;\r\n    }\r\n\r\n    _embaralharOpcoes(perguntas) {\r\n\r\n        const opcoesRotulos = ['A', 'B', 'C', 'D'];\r\n        \r\n        perguntas.forEach((pergunta, indicePergunta) =>\r\n                    ArrayHelper.shuffle(pergunta.opcoes).forEach((opcao, indiceOpcao) =>\r\n                                                            opcao.rotulo = opcoesRotulos[indiceOpcao]));     \r\n        \r\n        return perguntas;\r\n    }\r\n\r\n    getPerfis() {\r\n\r\n        return PerfisDataSource.getPerfis();\r\n    }\r\n}"]}